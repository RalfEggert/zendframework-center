<?php
/**
 * ZF3 book Zend Framework Center Example Application
 *
 * @author     Ralf Eggert <ralf@travello.de>
 * @link       https://github.com/zf3buch/zendframework-center
 * @license    http://opensource.org/licenses/MIT The MIT License (MIT)
 */

use AdvertModel\Entity\AdvertEntity;

/** @var AdvertEntity $job */
$job     = $this->randomJob;

/** @var AdvertEntity $project */
$project = $this->randomProject;

$jobText = strip_tags($job->getText());
$jobText = implode(
    ' ', array_slice(explode(' ', $jobText), 0, 50)
);

$projectText = strip_tags($project->getText());
$projectText = implode(
    ' ', array_slice(explode(' ', $projectText), 0, 50)
);

$jobDetailLink = $this->url('advert-job/detail', ['id' => $job->getId()], true);

$projectDetailLink = $this->url(
    'advert-project/detail', ['id' => $project->getId()], true
);

$jobListLink = $this->url('advert-job', [], true);

$projectListLink = $this->url('advert-project', [], true);

$this->h1('application_h1_index_index');
?>

<div class="row">
  <div class="col-sm-6">
    <h2>
      <a href="<?= $jobListLink; ?>">
        <?= $this->translate('application_h2_jobs') ?>
      </a>
    </h2>

    <div class="panel panel-primary">
      <div class="panel-heading clearfix">
        <strong>
          <a href="<?= $jobDetailLink; ?>"><?= $job->getTitle(); ?></a>
        </strong>
      </div>
      <div class="panel-body">
        <p>
          <img src="<?= $job->getCompany()->getLogo() ?>"
               class="img-responsive center-block">
        </p>
        <p><?= $jobText; ?> ...</p>
        <p class="text-center">
          <a href="<?= $jobDetailLink ?>" class="btn btn-primary">
            <?= $this->translate('advert_frontend_action_show_job'); ?>
          </a>
        </p>
      </div>
      <div class="panel-footer clearfix">
        <div class="left-text">
          <div class="label label-primary">
            <?= sprintf(
                $this->translate('advert_frontend_message_type_job'),
                $job->getLocation()
            ); ?>
          </div>
        </div>
        <div class="right-text">
          <div class="label label-primary">
            <?= sprintf(
                $this->translate('advert_frontend_label_last_update'),
                $project->getUpdated()->format('d.m.Y H:i:s')
            ); ?>
          </div>
        </div>
      </div>
    </div>
    <p class="text-center">
      <a href="<?= $jobListLink; ?>" class="btn btn-primary">
        <?= $this->translate('advert_frontend_action_all_jobs') ?>
      </a>
    </p>
  </div>
  <div class="col-sm-6">
    <h2>
      <a href="<?= $projectListLink; ?>">
        <?= $this->translate('application_h2_projects') ?>
      </a>
    </h2>

    <div class="panel panel-success">
      <div class="panel-heading clearfix">
        <strong>
          <a href="<?= $projectDetailLink; ?>"><?=
            $project->getTitle();
          ?></a>
        </strong>
      </div>
      <div class="panel-body">
        <p>
          <img src="<?= $project->getCompany()->getLogo() ?>"
               class="img-responsive center-block">
        </p>
        <p><?= $projectText; ?> ...</p>
        <p class="text-center">
          <a href="<?= $projectDetailLink ?>" class="btn btn-success">
            <?= $this->translate('advert_frontend_action_show_project'); ?>
          </a>
        </p>
      </div>
      <div class="panel-footer clearfix">
        <div class="left-text">
          <div class="label label-success">
            <?= sprintf(
                $this->translate('advert_frontend_message_type_project'),
                $project->getLocation()
            ); ?>
          </div>
        </div>
        <div class="right-text">
          <div class="label label-success">
            <?= sprintf(
                $this->translate('advert_frontend_label_last_update'),
                $project->getUpdated()->format('d.m.Y H:i:s')
            ); ?>
          </div>
        </div>
      </div>
    </div>
    <p class="text-center">
      <a href="<?= $projectListLink; ?>" class="btn btn-success">
        <?= $this->translate('advert_frontend_action_all_projects') ?>
      </a>
    </p>
  </div>
</div>
